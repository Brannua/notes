<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 但凡是内部的函数被保存到了外部，一定生成闭包
        function a () {
            function b () {
                var bbb = 234;
                document.write(aaa);//123
            }
            var aaa = 123;
            return b;
        }
        var global = 100;
        var demo = a();
        demo();
        // GO {
        //     global : 100,
        //     demo : function () {},
        //     a : function () {}
        // }
        // AO {
        //     aaa : 123,
        //     b : function (){}
        // }


        function a() {
            var num = 100;
            function b() {
                num ++;
                console.log(num);
            }
            return b;
        }
        var demo = a();
        demo();//101
        demo();//102
        // GO {
        //     a : function() {},
        //     demo : function () {}
        // }
        // AO {
        //     num : 100,
        //     b : function () {}
        // }
        // AO {

        // }
        // AO {

        // }

        // 当内部函数被保存到外部时，将会生成闭包，闭包会导致原有作用域链不释放，造成内存泄漏
    </script>
</body>

</html>